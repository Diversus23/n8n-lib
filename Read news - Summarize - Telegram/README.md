# IT-агрегатор новостей с AI-скорингом (n8n)

Этот сценарий для **n8n** решает проблему информационного шума для IT-руководителей и инженеров. Он автоматически собирает новости из кастомного списка RSS-источников, отсеивает нерелевантный контент, оценивает практическую пользу каждой статьи с помощью AI (GPT-4.1-nano) и присылает итоговую сводку в Telegram.

Сценарий был разработан для блога **"Код ИТ-директора"** и подробно разобран в [этом YouTube-видео](ссылка_на_видео).

## Как это работает

Логика сценария разделена на 4 ключевых этапа:

1. **Сбор и грубая фильтрация.** Дважды в день (в 7:30 и 15:00) сценарий забирает статьи из ~15 RSS-источников (Hacker News, Reddit, Habr и др.). На этом же этапе происходит первичная очистка: удаляются уже обработанные ссылки (проверка по базе в Notion) и отсеиваются статьи с "негативными" ключевыми словами (`crypto`, `marketing`, `politics` и т.д.).
2. **Интеллектуальная дедупликация.** Для борьбы с дубликатами новостей на разных сайтах используется алгоритм Левенштейна. Если заголовки похожи более чем на 85%, статья считается дублем и удаляется.
3. **Двухэтапный скоринг.**
    * **Keyword Scoring:** Статьи получают базовые баллы за наличие "позитивных" ключевых слов (`open source`, `case study`, `postgresql` и т.д.).
    * **AI Scoring:** Топ-300 статей отправляются в GPT-4 с системным промптом, имитирующим ассистента IT-директора. Модель оценивает каждую статью по 100-балльной шкале с точки зрения практической пользы.
4. **Формирование и отправка.** Сценарий отбирает топ-20 статей с оценкой выше 40, форматирует их в единое сообщение с заголовками, оценками и кратким обоснованием от AI, после чего отправляет в указанный чат Telegram.

## Требования

Для работы сценария вам потребуются аккаунты и настроенные доступы в следующих сервисах:
* **n8n** (self-hosted или облачная версия).
* **Notion**: для хранения ссылок на уже обработанные статьи.
* **OpenAI API**: для скоринга статей моделью GPT.
* **Telegram**: для получения уведомлений.

## Установка и настройка

1. **Скачайте** файл `workflow.json` из этого репозитория.
2. **Импортируйте** его в ваш n8n через меню "Import from File...".
3. **Настройте Credentials (учетные данные):**
    * `Notion`: Создайте интеграцию в Notion и получите API-токен.
    * `OpenAI`: Укажите ваш API-ключ.
    * `Telegram`: Создайте бота через @BotFather, получите его токен и ID вашего чата.
4. **Настройте узлы (nodes):**
    * **Notion**: В узле `Notion` укажите ваш **Database ID**. База данных должна содержать как минимум два поля: `url` (тип URL) и `title` (тип Title).
    * **OpenAI**: Убедитесь, что выбрана нужная модель (например, `gpt-4-turbo`) и проверьте текст системного промпта. Адаптируйте его под свои задачи, если нужно.
    * **Telegram**: В узле `Telegram` укажите ваш **Chat ID**.
5. **Активируйте сценарий**, переключив тумблер в положение ON.

## Кастомизация

Вы можете легко адаптировать сценарий под себя:
* **Источники:** Добавьте или удалите RSS-ленты в узлах `RSS Feed Read`.
* **Ключевые слова:** Измените списки `negativeKeywords` и `positiveKeywords` в узле `Code`, чтобы они соответствовали вашим интересам.
* **Промпт для AI:** Отредактируйте системный промпт в узле OpenAI, чтобы изменить критерии оценки статей.

## Стоимость

Сценарий использует платные API. Основная статья расходов — запросы к **OpenAI**. При текущих настройках (обработка ~600 статей в день) стоимость составляет около **$1-2 в день**.

